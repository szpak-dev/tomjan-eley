---
import { CldImage } from "astro-cloudinary";

import type { Product } from "../content/types";
import { getProductImageId } from "../content/repository";  

interface Props {
  product: Product;
}

const { product } = Astro.props;
const imageId = await getProductImageId(product.id);
---

<div class="col-12 col-md-6 col-lg-4 mb-4">
  <div class="card h-100 shadow-sm border-0">
    <div class="card-img-top-wrapper p-3 text-center bg-light">
      <CldImage
        class={"bg-dark h-100 w-100"}
        crop="fill"
        gravity="auto"
        format="auto"
        quality="auto"
        width={400}
        src={`eley.com.pl/${imageId}`}
        alt={product.name}
        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
      />
    </div>
    <div class="card-body d-flex flex-column">
      <h5 class="card-title fw-bold">{product.name}</h5>
      <h6 class="card-subtitle mb-2 text-muted">
        {product.subname}
      </h6>
      <a href={`/${Astro.params.lang}/products/${product.id}`} class="mt-auto stretched-link">
      </a>
    </div>
  </div>
</div>
